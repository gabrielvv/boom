<!DOCTYPE html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://unpkg.com/formiojs@latest/dist/formio.full.min.css">

  <script src="https://unpkg.com/formiojs@latest/dist/formio.full.min.js"></script>
  <script src="https://unpkg.com/wavesurfer.js"></script>

  <style>
    body {
      padding: 25px;
    }

    a {
      list-style: none;
    }
  </style>
</head>

<body>
  <h1>Boom !</h1>
  <div id="form"></div>
  <div id="result"></div>

  <script type="text/javascript">
    const baseUrl = 'http://localhost:3000'
    window.onload = function () {
      Formio.icons = 'fontawesome';

      Formio.setBaseUrl(baseUrl)
      Formio.createForm(document.getElementById('formio'), 'https://examples.form.io/example')
        .then(function (form) {
          // Prevent the submission from going to the form.io server.
          form.nosubmit = true;

          // Triggered when they click the submit button.
          form.on('submit', function ({ data }) {
            return fetch(baseUrl, {
              body: {
                ...data,
                file: data.upload[0],
              },
              headers: {
                'content-type': 'application/json'
              },
              method: 'POST',
              mode: 'cors',
            })
              .then(response => {
                form.emit('submitDone', submission)
              })
          });
        });
    };
  </script>
</body>

</html>
